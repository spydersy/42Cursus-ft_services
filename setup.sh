#!/bin/zsh

# Minikube cluster:----------------------------------------------------------------------------------------------------------------------------------------------#
clear && ./srcs/ascii_art/minikube.sh
sleep 5;
minikube start;
eval $(minikube docker-env);
#----------------------------------------------------------------------------------------------------------------------------------------------------------------#


# Metallb  LoadBalancecr:----------------------------------------------------------------------------------------------------------------------------------------#
clear && ./srcs/ascii_art/metallb.sh
sleep 5;
kubectl apply -f https://raw.githubusercontent.com/google/metallb/v0.8.1/manifests/metallb.yaml
kubectl apply -f ./srcs/yaml/configmap.yaml
eval $(minikube docker-env);
docker ps;
#----------------------------------------------------------------------------------------------------------------------------------------------------------------#


#MYSQL IMAGE:----------------------------------------------------------------------------------------------------------------------------------------------------#
clear && ./srcs/ascii_art/mysql.sh
docker build ./srcs/mysql/. -t mysql
# docker build /home/kali/Desktop/lab/mysql -t mysql
kubectl apply -f ./srcs/yaml/mysql.yaml
#----------------------------------------------------------------------------------------------------------------------------------------------------------------#


#PHPMYADMIN IMAGE:-----------------------------------------------------------------------------------------------------------------------------------------------#
clear && ./srcs/ascii_art/phpmyadmin.sh
docker build ./srcs/phpmyadmin/. -t phpmyadmin
kubectl apply -f ./srcs/yaml/phpmyadmin.yaml
#----------------------------------------------------------------------------------------------------------------------------------------------------------------#


#WORDPRESS IMAGE:------------------------------------------------------------------------------------------------------------------------------------------------#
clear && ./srcs/ascii_art/wordpress.sh
docker build ./srcs/wordpress/. -t wordpress
kubectl apply -f ./srcs/yaml/wordpress.yaml
#----------------------------------------------------------------------------------------------------------------------------------------------------------------#


#NGINX IMAGE:----------------------------------------------------------------------------------------------------------------------------------------------------#
clear && ./srcs/ascii_art/nginx.sh
docker build ./srcs/nginx/. -t nginx
kubectl apply -f ./srcs/yaml/nginx.yaml
#----------------------------------------------------------------------------------------------------------------------------------------------------------------#


#THE END:--------------------------------------------------------------------------------------------------------------------------------------------------------#
./srcs/ascii_art/end.sh
#----------------------------------------------------------------------------------------------------------------------------------------------------------------#
